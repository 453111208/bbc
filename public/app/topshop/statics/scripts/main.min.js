function isBody(a){return/^(?:body|html)$/i.test(a.tagName)}function getCompatElement(){var a=document;return a.compatMode&&"CSS1Compat"!=a.compatMode?a.body:a.html}document.head=document.head||document.getElementsByTagName("head")[0];function isElement(a){a=a[0]||a;return a.nodeName&&1===a.nodeType}function substitute(a,b){return String(a).replace(/\\?\{([^{}]+)\}/g,function(a,d){return"\\"===a.charAt(0)?a.slice(1):null!=b[d]?b[d]:""})}
function checkAll(a,b){$(b).prop("checked",$(a).prop("checked"))}$.fn.outerHtml=function(){if("outerHTML"in document.body){var a="";this.each(function(b){a+=this.outerHTML});return a}return $("<div>").append(this.clone(!0,!0)).html()};
$.fn.patch=function(a){var b=this,c;c=a?$.makeArray(a):["margin","padding","border"];var d={x:0,y:0};$.each({x:["left","right"],y:["top","bottom"]},function(a,f){$.each(f,function(f,k){try{$.each(c,function(c,f){f+="-"+k;0==f.indexOf("border")&&(f+="-width");d[a]+=parseInt(b.css(f))||0})}catch(p){}})});return d};
$.fn.locate=function(a){a=$.extend({relative:document.body,x:"center",y:"center"},a);var b=$(a.relative),c,d=$(this).css("position","absolute"),e=d.height();c=d.width();var f=(b.is("body")?$(window):b).innerHeight(),g=b.innerWidth();switch(a.x){case 0:case "left":c=0;break;case "right":c=g-c;break;default:c=parseInt((g-c)/2)}switch(a.y){case 0:case "top":a=0;break;case "bottom":a=f-e;break;default:a=parseInt((f-e)/2)}d.css({left:Math.max(0,Math.floor(c+(b.offset()?b.offset().left:0)+b.scrollLeft())),
top:Math.max(0,Math.floor(a+(b.offset()?b.offset().top:0)+b.scrollTop()))});return this};
var Class=function(a){var b=function(){"function"===typeof this.init&&this.init.apply(this,arguments)};b.prototype=a||{};b.prototype.setOptions=function(){this.options=$.extend.apply(null,[!0,{},this.options].concat($.makeArray(arguments)));return this};b.prototype.trigger=function(a,d){a=this.options[a]||this.options["on"+a.replace(/^[a-z]/g,function(a){return a.toUpperCase()})];"function"===typeof a&&a.apply(this,$.makeArray(d));return this};return b};
(function(){var a,b,c=window.console;window.log=a=function(){b.push(arguments);c?c.log[c.firebug?"apply":"call"](c,Array.prototype.slice.call(arguments)):alert(Array.prototype.slice.call(arguments).join("\n"))};a.history=b=[]})();var imageUpload=function(a){a=$.extend({url:"",target:document.body,fileName:"upload_files",inputName:"images[]",size:512E3,width:50,height:50,multiple:!0,limit:0,handle:".action-upload",file_input:".action-file-input",insertWhere:null,callback:null},a||{});$(a.target).on("click",a.handle,function(b){$(this).parent().find(a.file_input).click()}).on("change",a.file_input,function(b){var c=$(this);b=c.parent();var d=b.find(a.handle),e=this.getAttribute("data-filename")||a.fileName,f=this.getAttribute("data-size"),
f=Number(f)||a.size,g=b.find(this.getAttribute("data-insertwhere")||a.insertWhere||".image-box"),k=this.multiple,p=this.getAttribute("data-remote")||a.url,n=this.getAttribute("data-max")||a.limit,m=this.getAttribute("name")||a.inputName,q=this.getAttribute("data-callback")||c.data("callback")||a.callback,w=new FormData,r=this.files;if(n&&b.find(".img-thumbnail:not(.action-upload)").length+(k&&r?r.length:1)>n)return alert("超出限制，最多上传"+n+"张。"),!1;if(!r||!Array.prototype.slice.call(r).every(function(a,
d){if(a.size>f)return $("#messagebox").message('抱歉，上传图片 "'+a.name+'" 须小于'+f/1024+"kB!"),c.val(""),!1;k?w.append(e+"[]",a):w.append(e,a);return!0}))return!1;$.ajax({url:p,type:"POST",data:w,cache:!1,contentType:!1,processData:!1,success:function(a){try{a=JSON.parse(a)}catch(c){}if(a.success&&a.data){if(q)return q(a);var b="";k?(g=d,$.each(a.data,function(a,d){d.url&&(b+='<div class="handle img-thumbnail"><i class="icon-close-b" onclick="$(this).parent().remove();"></i><img src="'+d.url+'"><input type="hidden" name="'+
m+'" value="'+d.url+'"></div>')}),$(b).insertBefore(g)):(a=a.data[e],a.url&&(b='<img src="'+a.url+'"><input type="hidden" name="'+m+'" value="'+a.url+'">'),$(g).html(b))}else a.message&&$("#messagebox").message(a.message)},error:function(){$("#messagebox").message("上传出错，请重试")}})})};jQuery(function(){imageUpload()});var left_side_width=220;
$(function(){function a(){var a=$(window).height()-($("body > .header").outerHeight()||0)-($("body > .footer").outerHeight()||0),c=$(".wrapper").height();$(".wrapper").css("min-height",a);$(".left-side, html, body").css("min-height",Math.max(c,a))}$("[data-toggle='offcanvas']").click(function(a){a.preventDefault();992>=$(window).width()?($(".row-offcanvas").toggleClass("active"),$(".left-side").removeClass("collapse-left"),$(".right-side").removeClass("strech"),$(".row-offcanvas").toggleClass("relative")):($(".left-side").toggleClass("collapse-left"),
$(".right-side").toggleClass("strech"))});$(".btn").bind("touchstart",function(){$(this).addClass("hover")}).bind("touchend",function(){$(this).removeClass("hover")});$("[data-toggle='tooltip']").tooltip();$("[data-widget='collapse']").click(function(){var a=$(this).parents(".box").first(),c=a.find(".box-body, .box-footer");a.hasClass("collapsed-box")?(a.removeClass("collapsed-box"),$(this).children(".fa-plus").removeClass("fa-plus").addClass("fa-minus"),c.slideDown()):(a.addClass("collapsed-box"),
$(this).children(".fa-minus").removeClass("fa-minus").addClass("fa-plus"),c.slideUp())});$(".navbar .menu").slimscroll({height:"200px",alwaysVisible:!1,size:"3px"}).css("width","100%");$('.btn-group[data-toggle="btn-toggle"]').each(function(){var a=$(this);$(this).find(".btn").click(function(c){a.find(".btn.active").removeClass("active");$(this).addClass("active");c.preventDefault()})});$("[data-widget='remove']").click(function(){$(this).parents(".box").first().slideUp()});$(".sidebar .treeview").tree();
a();$(window).resize(function(){a();fix_sidebar()});fix_sidebar();$("form:not([novalidate])").Validator({icons:{valid:"icon icon-checkmark-a",invalid:"icon icon-alert",validating:"icon icon-loading-c"}});$("body").on("click",".show-pics a",function(a){a.preventDefault();if(a=$(this).attr("href"))$("#show_img_madal").modal("show"),$("#big_img").attr("src",a);else return!1})});
function fix_sidebar(){$("body").hasClass("fixed")&&$(".sidebar").slimscroll({height:$(window).height()-$(".header").height()+"px",color:"rgba(0,0,0,0.2)"})}
(function(a){a.fn.boxRefresh=function(b){function c(a){a.append(e);d.onLoadStart.call(a)}var d=a.extend({trigger:".refresh-btn",source:"",onLoadStart:function(a){},onLoadDone:function(a){}},b),e=a('<div class="overlay"></div><div class="loading-img"></div>');return this.each(function(){if(""===d.source)console&&console.log("Please specify a source first - boxRefresh()");else{var b=a(this);b.find(d.trigger).first().click(function(a){a.preventDefault();c(b);b.find(".box-body").load(d.source,function(){b.find(e).remove();
d.onLoadDone.call(b)})})}})}})(jQuery);
(function(a){a.fn.tree=function(){return this.each(function(){var b=a(this).children("a").first(),c=a(this).children(".treeview-menu").first(),d=a(this).hasClass("active");d&&(c.show(),b.children(".fa-angle-left").first().removeClass("fa-angle-left").addClass("fa-angle-down"));b.click(function(a){a.preventDefault();d?(c.slideUp(),d=!1,b.children(".fa-angle-down").first().removeClass("fa-angle-down").addClass("fa-angle-left"),b.parent("li").removeClass("active")):(c.slideDown(),d=!0,b.children(".fa-angle-left").first().removeClass("fa-angle-left").addClass("fa-angle-down"),
b.parent("li").addClass("active"))});c.find("li > a").each(function(){var d=parseInt(a(this).css("margin-left"))+10;a(this).css({"margin-left":d+"px"})})})}})(jQuery);
(function(a){jQuery.fn.center=function(b){b=a.extend(!0,{},b);parent=b.parent?this.parent().css("position","relative"):window;this.css({top:"top"===b.top?0:b.top?b.top:(a(parent).height()-this.outerHeight())/2+a(parent).scrollTop()+"px",left:"left"===b.left?0:b.left?b.left:(a(parent).width()-this.outerWidth())/2+a(parent).scrollLeft()+"px"});return this}})(jQuery);
(function(a){a.fn.message=function(b,c,d,e){var f=this;this.data("timer")&&(clearTimeout(this.data("timer")),this.timer=null);this[0].className=this[0].className.replace(/alert-(success|error|warning|info|danger)/g,"");this.html(b).addClass("alert-"+(c||"error"));b=a("header.header").size()?a("header.header").height():"top";this.fadeIn("fast").center({top:b});this.data("timer",setTimeout(function(){f.fadeOut("fast")},d||3E3))}})(jQuery);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a:a(jQuery)})(function(a){function b(a,c,b){var g="over"==c;a.addEventListener("OverflowEvent"in window?"overflowchanged":c+"flow",function(a){if(a.type==c+"flow"||0==a.orient&&a.horizontalOverflow==g||1==a.orient&&a.verticalOverflow==g||2==a.orient&&a.horizontalOverflow==g&&a.verticalOverflow==g)return a.flow=c,b.call(this,a)},!1)}function c(d){var c=d||window.event,b=[].slice.call(arguments,
1);d=a.event.fix(c);d.type="resize";b.unshift(d);return(a.event.dispatch||a.event.handle).apply(this,b)}a.event.special.resize={setup:function(){var a=this,e="onresize"in a;if(!e&&!a._resizeSensor){var f=a._resizeSensor=document.createElement("div");f.className="resize-sensor";f.innerHTML='<div class="resize-overflow"><div></div></div><div class="resize-underflow"><div></div></div>';var g=0,k=0,p=f.firstElementChild.firstChild,n=f.lastElementChild.firstChild,m=function(c){var b=!1,e=a.offsetWidth;
g!=e&&(p.style.width=e-1+"px",n.style.width=e+1+"px",b=!0,g=e);e=a.offsetHeight;k!=e&&(p.style.height=e-1+"px",n.style.height=e+1+"px",b=!0,k=e);if(b&&c.currentTarget!=a){c={};b=document.createEvent("Event");b.initEvent("resize","bubbles"in c?c.bubbles:!0,"cancelable"in c?c.cancelable:!0);for(var f in void 0)b[f]=(void 0)[f];a.dispatchEvent(b)}};"static"==getComputedStyle(a).position&&(a.style.position="relative",a._resizeSensor._resetPosition=!0);b(f,"over",m);b(f,"under",m);b(f.firstElementChild,
"over",m);b(f.lastElementChild,"under",m);a.appendChild(f);m({})}var q=a._flowEvents||(a._flowEvents=[]);-1==q.indexOf(c)&&q.push(c);e||a.addEventListener("resize",c,!1);a.onresize=function(c){q.forEach(function(b){b.call(a,c)})}},teardown:function(){var a=this._flowEvents.indexOf(c);-1<a&&this._flowEvents.splice(a,1);if(!this._flowEvents.length){if(a=this._resizeSensor)this.removeChild(a),a._resetPosition&&(this.style.position="static"),delete this._resizeSensor;"onresize"in this&&(this.onresize=
null);delete this._flowEvents}this.removeEventListener("resize",c)}};a.fn.extend({resize:function(a){return a?this.bind("resize",a):this.trigger("resize")},unresize:function(a){return this.unbind("resize",a)}})});
(function(a){jQuery.fn.extend({slimScroll:function(b){var c=a.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"0px",railBorderRadius:"0px"},b);this.each(function(){function d(b){if(n){b=b||
window.event;var d=0;b.wheelDelta&&(d=-b.wheelDelta/120);b.detail&&(d=b.detail/3);a(b.target||b.srcTarget||b.srcElement).closest("."+c.wrapperClass).is(h.parent())&&e(d,!0);b.preventDefault&&!u&&b.preventDefault();u||(b.returnValue=!1)}}function e(a,b,d){u=!1;var e=a,f=h.outerHeight()-l.outerHeight();b&&(e=parseInt(l.css("top"))+a*parseInt(c.wheelStep)/100*l.outerHeight(),e=Math.min(Math.max(e,0),f),e=0<a?Math.ceil(e):Math.floor(e),l.css({top:e+"px"}));s=parseInt(l.css("top"))/(h.outerHeight()-l.outerHeight());
e=s*(h[0].scrollHeight-h.outerHeight());d&&(e=a,a=e/h[0].scrollHeight*h.outerHeight(),a=Math.min(Math.max(a,0),f),l.css({top:a+"px"}));h.scrollTop(e);h.trigger("slimscrolling",~~e);k();p()}function f(){window.addEventListener?(this.addEventListener("DOMMouseScroll",d,!1),this.addEventListener("mousewheel",d,!1),this.addEventListener("MozMousePixelScroll",d,!1)):document.attachEvent("onmousewheel",d)}function g(){z=Math.max(h.outerHeight()/h[0].scrollHeight*h.outerHeight(),B);l.css({height:z+"px"});
var a=z==h.outerHeight()?"none":"block";l.css({display:a})}function k(){g();clearTimeout(w);s==~~s?(u=c.allowPageScroll,A!=s&&h.trigger("slimscroll",0==~~s?"top":"bottom")):u=!1;A=s;z>=h.outerHeight()?u=!0:(l.stop(!0,!0).fadeIn("fast"),c.railVisible&&v.stop(!0,!0).fadeIn("fast"))}function p(){c.alwaysVisible||(w=setTimeout(function(){c.disableFadeOut&&n||m||q||(l.fadeOut("slow"),v.fadeOut("slow"))},1E3))}var n,m,q,w,r,z,s,A,B=30,u=!1,h=a(this);if(h.parent().hasClass(c.wrapperClass)){var x=h.scrollTop(),
l=h.parent().find("."+c.barClass),v=h.parent().find("."+c.railClass);g();if(a.isPlainObject(b)){if("height"in b&&"auto"==b.height){h.parent().css("height","auto");h.css("height","auto");var y=h.parent().parent().height();h.parent().css("height",y);h.css("height",y)}if("scrollTo"in b)x=parseInt(c.scrollTo);else if("scrollBy"in b)x+=parseInt(c.scrollBy);else if("destroy"in b){l.remove();v.remove();h.unwrap();return}e(x,!1,!0)}}else c.height="auto"==c.height?h.parent().height():c.height,x=a("<div></div>").addClass(c.wrapperClass).css({position:"relative",
overflow:"hidden",width:c.width,height:c.height}),h.css({overflow:"hidden",width:c.width,height:c.height}),v=a("<div></div>").addClass(c.railClass).css({width:c.size,height:"100%",position:"absolute",top:0,display:c.alwaysVisible&&c.railVisible?"block":"none","border-radius":c.railBorderRadius,background:c.railColor,opacity:c.railOpacity,zIndex:90}),l=a("<div></div>").addClass(c.barClass).css({background:c.color,width:c.size,position:"absolute",top:0,opacity:c.opacity,display:c.alwaysVisible?"block":
"none","border-radius":c.borderRadius,BorderRadius:c.borderRadius,MozBorderRadius:c.borderRadius,WebkitBorderRadius:c.borderRadius,zIndex:99}),y="right"==c.position?{right:c.distance}:{left:c.distance},v.css(y),l.css(y),h.wrap(x),h.parent().append(l),h.parent().append(v),c.railDraggable&&l.bind("mousedown",function(b){var c=a(document);q=!0;t=parseFloat(l.css("top"));pageY=b.pageY;c.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;l.css("top",currTop);e(0,l.position().top,!1)});c.bind("mouseup.slimscroll",
function(a){q=!1;p();c.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1}),v.hover(function(){k()},function(){p()}),l.hover(function(){m=!0},function(){m=!1}),h.hover(function(){n=!0;k();p()},function(){n=!1;p()}),h.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(r=a.originalEvent.touches[0].pageY)}),h.bind("touchmove",function(a){u||a.originalEvent.preventDefault();a.originalEvent.touches.length&&(e((r-a.originalEvent.touches[0].pageY)/
c.touchScrollStep,!0),r=a.originalEvent.touches[0].pageY)}),g(),"bottom"===c.start?(l.css({top:h.outerHeight()-l.outerHeight()}),e(0,!0)):"top"!==c.start&&(e(a(c.start).position().top,null,!0),c.alwaysVisible||l.hide()),f()});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);
(function(a){if(!window.localStorage||!window.JSON)return a.fn.rememberState=function(){return this};var b={name:"rememberState",clearOnSubmit:!0,ignore:null,use_ids:!1,mark:null,restoreState:function(a){var b=JSON.parse(localStorage.getItem(this.mark)),c=this.$el,g,k;for(k in b)g=c.find('[name="'+b[k].name+'"]'),g.is(":radio")?g.filter('[value="'+b[k].value+'"]').prop("checked",!0):g.is(":checkbox")&&b[k].value?g.prop("checked",!0):g.is("select")?g.find('[value="'+b[k].value+'"]').prop("selected",
!0):g.val(b[k].value),g.change();a&&a.preventDefault&&a.preventDefault()},saveState:function(b){b=b.data.instance;var e=b.$el.serializeArray();b.$el.find("input[type='datetime-local']").each(function(){var b=a(this);e.push({name:b.attr("name"),value:b.val()})});e=b.removeIgnored(e);e.length&&c.setObject(b.mark,e)},save:function(){var a=this;this.saveState||(a=this.data(b.name));a.saveState({data:{instance:a}})},removeIgnored:function(b){var c=this.ignore;if(!c)return b;a.each(b,function(f,g){-1!==
a.inArray(g.name,c)&&(b[f]=!1)});return b=a.grep(b,function(a){return a})},setName:function(){(this.mark=this.mark||this.$el.attr("id"))||console.warn("No form ID or other mark.");this.mark="rememberstate_"+this.mark},bindResetEvents:function(){var b=this;this.clearOnSubmit&&this.$el.bind("submit."+this.name,function(){a(this).trigger("reset_state");a(window).unbind("unload."+b.name)});this.$el.bind("reset_state."+this.name,function(){localStorage.removeItem(b.mark)});this.$el.find(":reset").bind("click."+
this.name,function(){a(this).closest("form").trigger("reset_state")})},destroy:function(b){var c="."+this.name;this.$el.unbind(c).find(":reset").unbind(c);a(window).unbind(c);b&&localStorage.removeItem(this.mark)},init:function(){this.setName();this.mark&&(this.bindResetEvents(),a(window).bind("unload."+this.name,{instance:this},this.saveState))}},c={setObject:function(a,b){localStorage[a]=JSON.stringify(b)},getObject:function(a){return JSON.parse(localStorage[a])},createPlugin:function(b){a.fn[b.name]=
function(c){var f=this,g=a.isPlainObject(c)||!c?"":c,k=arguments;g&&b[g]?f.each(function(a){b[g].apply(f.eq(a).data(b.name),Array.prototype.slice.call(k,1))}):g?a.error("Method "+g+" does not exist on jQuery."+b.name):f.each(function(g){var k=a.extend(!0,{$el:f.eq(g)},b,c);f.eq(g).data(b.name,k);k.init()});return f}}};c.createPlugin(b)})(jQuery);