<div class="modal fade" id="feedback" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">意见反馈</h4>
      </div>
      <form action="<{url action='topshop_ctl_index@feedback' }>" method="post" class="form-horizontal bg-white clearfix" role="form" data-validate-onsuccess="ajaxSubmit" id="saveFeedback">
        <div class="modal-body">
          <div class="form-group">
            <label class="col-sm-2" ></label>
            <div class="col-sm-10">欢迎提出宝贵得意见和建议！我们会用心倾听并持续改进产品，<br>把更好得体验带给您！</div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" >姓名：</label>
            <div class="col-sm-6">
              <input type="text" name="name"  class="form-control" required placeholder="必填姓名" maxlength="20">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" >邮箱：</label>
            <div class="col-sm-6">
              <input type="email" name="email"  class="form-control" placeholder="必填邮箱" required maxlength="20">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" >电话：</label>
            <div class="col-sm-6">
              <input type="text" name="tel"  class="form-control" placeholder="必填联系电话" required maxlength="20">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" >问题：</label>
            <div class="col-sm-8">
              <textarea class="form-control" name="question" required placeholder="必填问题详情描述" rows="4"></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-default" data-dismiss="modal">取消</button>
          <button type="submit" class="btn btn-primary">保存</button>
        </div>
      </form>
    </div>
  </div>
</div>
<script>
  $("#saveFeedback").Validator();
  function ajaxSubmit (e) {
    var form = e.target;
    e.preventDefault();
    $.post(form.action, $(form).serialize(), function(rs) {
      if(rs.error) {
        $('#messagebox').message(rs.message);
        return;
      }
      if(rs.success) {
        $('#messagebox').message(rs.message, 'success');
        $('#feedback').on('hide', function(e){
           $(this).find('input, select, textarea').val('');
           $("#saveFeedback").Validator('resetForm');
        }).modal('hide');
      }
    });
  }
</script>
